webpackJsonp([3],{"5aDR":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,o=n("WT6e"),s=function(){},r=n("v2mS"),a=n("Y5Yx"),h=n("TToO"),u=n("QFcC"),l=function(t){function e(e,n,i){var o=t.call(this,e,n,i,"icon",122)||this;return o.setTint(3469087),o.scene.add.existing(o),o}return Object(h.b)(e,t),e}(u.GameObjects.Sprite),c=function(t){function e(e,n,i){var o=t.call(this,e,n,i,"icon",168)||this;return o.setTint(15223603),o.scene.add.existing(o),o}return Object(h.b)(e,t),e}(u.GameObjects.Sprite),d=function(t){function e(){var e=t.call(this,{key:"StartScene"})||this;return e.active=!0,e}return Object(h.b)(e,t),e.prototype.preload=function(){this.load.spritesheet("icon","assets/tic-tac-toe/spritesheet.png",{frameWidth:50,frameHeight:50})},e.prototype.create=function(){var t=this,e=this.add.graphics();e.lineStyle(3,11974586,1),e.strokeRect(55,46,70,70);var n=this.add.graphics();n.lineStyle(3,11974586,1),n.strokeRect(163,46,70,70);var i=new l(this,90,81),o=new c(this,198,81);e.setAlpha(.7),i.setAlpha(.7),n.setAlpha(.7),o.setAlpha(.7),this.input.on("pointermove",function(t){t.x>55&&t.x<125&&t.y>46&&t.y<116?(e.setAlpha(1),i.setAlpha(1),n.setAlpha(.7),o.setAlpha(.7)):t.x>163&&t.x<233&&t.y>46&&t.y<116?(e.setAlpha(.7),i.setAlpha(.7),n.setAlpha(1),o.setAlpha(1)):(e.setAlpha(.7),i.setAlpha(.7),n.setAlpha(.7),o.setAlpha(.7))}),this.input.on("pointerdown",function(e){e.x>55&&e.x<125&&e.y>46&&e.y<116?(t.scene.start("PlayScene",{player:0}),t.input.removeAllListeners()):e.x>163&&e.x<233&&e.y>46&&e.y<116&&(t.scene.start("PlayScene",{player:1}),t.input.removeAllListeners())})},e}(u.Scene);!function(t){t[t.NONE=-1]="NONE",t[t.O=0]="O",t[t.X=1]="X"}(i||(i={}));var g=function(){function t(){this.states=Array(9).fill(i.NONE)}return t.prototype.checkWinner=function(){var e=this,n=t.TUPLES.find(function(t){return e.states[t[0]]===e.states[t[1]]&&e.states[t[1]]===e.states[t[2]]&&e.states[t[0]]!==i.NONE});return n?{row:n,state:this.states[n[0]]}:null},t.prototype.get=function(t){if((t=Math.floor(t))<0||t>this.states.length)throw new Error("Expected i to be within 0 to 8, got "+t);return this.states[t]},t.prototype.set=function(t,e){if((t=Math.floor(t))<0||t>this.states.length)throw new Error("Expected i to be within 0 to 8, got "+t);this.states[t]=e},t.prototype.numFilled=function(){return this.states.filter(function(t){return t!==i.NONE}).length},t.prototype.getEmptySlot=function(){return this.states.findIndex(function(t){return t===i.NONE})},t.prototype.getMostValuableSlot=function(){var e=this,n=Array(this.states.length).fill(null).map(function(t,n){return e.states[n]===i.NONE?0:Number.NEGATIVE_INFINITY});t.TUPLES.forEach(function(t){if(t.every(function(t){return e.states[t]!==i.O})){var o=t.some(function(t){return e.states[t]===i.X})?3:1;t.forEach(function(t){return n[t]+=o})}if(t.every(function(t){return e.states[t]!==i.X})){var s=t.some(function(t){return e.states[t]===i.O})?3:1;t.forEach(function(t){return n[t]+=s})}});var o=Math.max.apply(Math,n);return o<0?-1:n.findIndex(function(t){return t===o})},t.ROWS=[[0,1,2],[3,4,5],[6,7,8]],t.COLS=[[0,3,6],[1,4,7],[2,5,8]],t.DIAGS=[[0,4,8],[2,4,6]],t.TUPLES=t.ROWS.concat(t.COLS).concat(t.DIAGS),t}(),p=[[0,6,8,2],[1,3,7,5],[2,0,6,8],[3,7,5,1],[4,4,4,4],[5,1,3,7],[6,8,2,0],[7,5,1,3],[8,2,0,6]],f=function(){function t(t){this.state=t,this.defenseMode=!1,this.winMode=!1,this.rotation=Math.floor(4*Math.random())}return t.prototype.getState=function(){return this.state},t.prototype.nextMove=function(t){if(this.defenseMode)return this.defend(t);if(this.winMode)return this.win(t);switch(t.numFilled()){case 0:return this.getRotated(0);case 1:return t.get(this.getRotated(4))===i.NONE?this.getRotated(4):this.getRotated(0);case 2:return t.get(this.getRotated(4))===i.NONE?(this.winMode=!0,this.win(t)):this.getRotated(8);case 3:if(this.defenseMode=!0,t.get(this.getRotated(4))===this.state)return t.get(this.getRotated(0))===t.get(this.getRotated(8))&&t.get(this.getRotated(0))!==i.NONE?this.getRotated(1):t.get(this.getRotated(2))===t.get(this.getRotated(6))&&t.get(this.getRotated(2))!==i.NONE?this.getRotated(1):this.defend(t);this.defend(t);case 4:return this.defenseMode=!0,t.get(this.getRotated(2))!==i.NONE?this.getRotated(6):t.get(this.getRotated(6))!==i.NONE?this.getRotated(2):this.defend(t);default:throw new Error("Should have entered defense mode or win mode by now")}},t.prototype.defend=function(t){for(var e=this,n=function(n){var o=[[n[1],n[2]],[n[0],n[2]],[n[0],n[1]]].findIndex(function(o,s){return t.get(o[0])===t.get(o[1])&&t.get(o[0])===e.state&&t.get(n[s])===i.NONE});if(-1!==o)return{value:n[o]}},o=0,s=g.TUPLES;o<s.length;o++){var r=n(s[o]);if("object"==typeof r)return r.value}for(var a=function(n){var o=[[n[1],n[2]],[n[0],n[2]],[n[0],n[1]]].findIndex(function(o,s){return t.get(o[0])===t.get(o[1])&&t.get(o[0])!==e.state&&t.get(o[0])!==i.NONE&&t.get(n[s])===i.NONE});if(-1!==o)return{value:n[o]}},h=0,u=g.TUPLES;h<u.length;h++){var l=a(u[h]);if("object"==typeof l)return l.value}return t.getMostValuableSlot()},t.prototype.win=function(t){switch(t.numFilled()){case 2:return t.get(this.getRotated(1))!==i.NONE?this.getRotated(6):t.get(this.getRotated(2))!==i.NONE?this.getRotated(6):t.get(this.getRotated(3))!==i.NONE?this.getRotated(2):t.get(this.getRotated(5))!==i.NONE?this.getRotated(2):t.get(this.getRotated(6))!==i.NONE?this.getRotated(2):(t.get(this.getRotated(7)),this.getRotated(6));case 4:return t.get(this.getRotated(2))===this.state?t.get(this.getRotated(1))===i.NONE?this.getRotated(1):t.get(this.getRotated(5))!==i.NONE?this.getRotated(6):this.getRotated(8):t.get(this.getRotated(3))===i.NONE?this.getRotated(3):t.get(this.getRotated(1))!==i.NONE?this.getRotated(8):t.get(this.getRotated(2))!==i.NONE?this.getRotated(8):this.getRotated(2);case 6:return t.get(this.getRotated(2))!==this.state?t.get(this.getRotated(7))===i.NONE?this.getRotated(7):t.get(this.getRotated(3))===i.NONE?this.getRotated(3):this.getRotated(4):t.get(this.getRotated(6))!==this.state?t.get(this.getRotated(1))===i.NONE?this.getRotated(1):t.get(this.getRotated(5))===i.NONE?this.getRotated(5):this.getRotated(4):t.get(this.getRotated(1))===i.NONE?this.getRotated(1):t.get(this.getRotated(3))===i.NONE?this.getRotated(3):this.getRotated(4);default:throw new Error("This is not a winning board for me")}},t.prototype.getRotated=function(t){return p[t][this.rotation%4]},t}(),y=function(t){function e(){var e=t.call(this,{key:"PlayScene"})||this;return e.active=!1,e}return Object(h.b)(e,t),e.prototype.init=function(t){var e=this,n=t.player;this.player=n,this.playerHoverIcon=this.player===i.O?new l(this,0,0):new c(this,0,0),this.playerHoverIcon.setAlpha(.3),this.playerHoverIcon.setVisible(!1),this.board=new g,this.computer=new f(n===i.O?i.X:i.O),n===i.X&&this.move(this.computer.nextMove(this.board),this.computer.getState()),this.input.on("pointermove",function(t){var n=e.xyToPosition(t.x,t.y);if(n>-1&&e.board.get(n)===i.NONE){var o=e.positionToXY(n),s=o[1];e.playerHoverIcon.x=o[0],e.playerHoverIcon.y=s,e.playerHoverIcon.setVisible(!0)}else e.playerHoverIcon.setVisible(!1)}),this.input.on("pointerdown",function(t){var n=e.xyToPosition(t.x,t.y);if(n>-1&&e.board.get(n)===i.NONE){e.move(n,e.player);var o=e.board.checkWinner();if(o)e.endGame(o);else if(e.board.numFilled()<9){e.move(e.computer.nextMove(e.board),e.computer.getState());var s=e.board.checkWinner();s?e.endGame(s):9===e.board.numFilled()&&e.endGame(null)}else e.endGame(null)}})},e.prototype.preload=function(){this.load.spritesheet("icon","assets/tic-tac-toe/spritesheet.png",{frameWidth:50,frameHeight:50})},e.prototype.create=function(){var t=this.add.graphics();t.lineStyle(4,2236962,1),t.lineBetween(115,2,115,160),t.lineBetween(173,2,173,160),t.lineBetween(57,54,231,54),t.lineBetween(57,108,231,108)},e.prototype.move=function(t,e){this.board.set(t,e);var n=this.positionToXY(t),o=n[0],s=n[1];e===i.O?new l(this,o,s):new c(this,o,s)},e.prototype.positionToXY=function(t){return[86+t%3*58,28+53*Math.floor(t/3)]},e.prototype.xyToPosition=function(t,e){var n=-1,i=-1;return e>6&&e<50?n=0:e>58&&e<104?n=1:e>112&&e<156&&(n=2),t>61&&t<111?i=0:t>119&&t<169?i=1:t>177&&t<227&&(i=2),-1===n||-1===i?-1:3*n+i},e.prototype.endGame=function(t){var e,n=this;if(this.input.removeAllListeners(),t){var i=this.positionToXY(t.row[0]),o=i[0],s=i[1],r=this.positionToXY(t.row[2]),a=r[0],h=r[1];o===a?(s-=10,h+=10):s===h?(o-=10,a+=10):(a+=a<(o+=o<a?-10:10)?-10:10,h+=h<(s+=s<h?-10:10)?-10:10),this.add.graphics().lineStyle(6,2236962,.6).lineBetween(o,s,a,h),e=t.state===this.player?"WIN":"LOSE"}else e="DRAW";this.add.graphics().fillStyle(16777215,.9).lineStyle(3,0,.9).fillRect(104,58.5,80,45).strokeRect(104,58.5,80,45);var u=this.add.text(144,81,e);u.setOrigin(.5,.5),u.setColor("#000000"),u.setFontSize(24),u.setStroke("#000000",2),this.input.once("pointerdown",function(){n.scene.start("StartScene")})},e}(u.Scene),N=function(){return function(){this.config={title:"Tic Tac Toe",url:"https://ksmai.github.io/html5-games/tic-tac-toe",version:"1.0",backgroundColor:"#eeeeee",scene:[d,y]},this.instructions="Obtain victory by lining up 3 symbols in a row, column or diagonal!"}}(),R=o._2({encapsulation:0,styles:[[""]],data:{}});function v(t){return o._21(0,[(t()(),o._4(0,0,null,null,1,"game-phaser-game-container",[],null,null,null,r.b,r.a)),o._3(1,4374528,null,0,a.a,[o.k],{config:[0,"config"],title:[1,"title"],instructions:[2,"instructions"]},null),(t()(),o._20(-1,null,["\n"]))],function(t,e){var n=e.component;t(e,1,0,n.config,n.config.title,n.instructions)},null)}var O=o._0("ng-component",N,function(t){return o._21(0,[(t()(),o._4(0,0,null,null,1,"ng-component",[],null,null,null,v,R)),o._3(1,49152,null,0,N,[],null,null)],null,null)},{},{},[]),m=n("Xjw4"),E=n("LdoY"),w=n("bfOx"),b=function(){};n.d(e,"TicTacToeModuleNgFactory",function(){return S});var S=o._1(s,[],function(t){return o._11([o._12(512,o.j,o.X,[[8,[O]],[3,o.j],o.w]),o._12(4608,m.k,m.j,[o.t,[2,m.p]]),o._12(512,m.b,m.b,[]),o._12(512,E.a,E.a,[]),o._12(512,w.p,w.p,[[2,w.u],[2,w.m]]),o._12(512,b,b,[]),o._12(512,s,s,[]),o._12(1024,w.i,function(){return[[{path:"",component:N}]]},[])])})}});
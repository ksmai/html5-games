{"version":3,"sources":["./src/app/tower-defense/tower-defense-game/enemy-spawner.ts","./src/app/tower-defense/tower-defense-game/enemy/brown-minion.ts","./src/app/tower-defense/tower-defense-game/enemy/enemy.ts","./src/app/tower-defense/tower-defense-game/enemy/green-cannon.ts","./src/app/tower-defense/tower-defense-game/enemy/green-minion.ts","./src/app/tower-defense/tower-defense-game/enemy/green-plane.ts","./src/app/tower-defense/tower-defense-game/enemy/green-tank.ts","./src/app/tower-defense/tower-defense-game/enemy/grey-minion.ts","./src/app/tower-defense/tower-defense-game/enemy/index.ts","./src/app/tower-defense/tower-defense-game/enemy/white-cannon.ts","./src/app/tower-defense/tower-defense-game/enemy/white-minion.ts","./src/app/tower-defense/tower-defense-game/enemy/white-plane.ts","./src/app/tower-defense/tower-defense-game/enemy/white-tank.ts","./src/app/tower-defense/tower-defense-game/holy-leaf.ts","./src/app/tower-defense/tower-defense-game/level-map.ts","./src/app/tower-defense/tower-defense-game/path-generator.ts","./src/app/tower-defense/tower-defense-game/play.scene.ts","./src/app/tower-defense/tower-defense-game/projectile/big-cannon.ts","./src/app/tower-defense/tower-defense-game/projectile/big-rocket.ts","./src/app/tower-defense/tower-defense-game/projectile/index.ts","./src/app/tower-defense/tower-defense-game/projectile/projectile.ts","./src/app/tower-defense/tower-defense-game/projectile/small-cannon.ts","./src/app/tower-defense/tower-defense-game/projectile/small-rocket.ts","./src/app/tower-defense/tower-defense-game/start.scene.ts","./src/app/tower-defense/tower-defense-game/tower-defense-game.component.html","./src/app/tower-defense/tower-defense-game/tower-defense-game.component.scss","./src/app/tower-defense/tower-defense-game/tower-defense-game.component.ts","./src/app/tower-defense/tower-defense-game/tower-shop.ts","./src/app/tower-defense/tower-defense-game/tower/double-cannon.ts","./src/app/tower-defense/tower-defense-game/tower/double-rocket.ts","./src/app/tower-defense/tower-defense-game/tower/index.ts","./src/app/tower-defense/tower-defense-game/tower/single-cannon.ts","./src/app/tower-defense/tower-defense-game/tower/single-rocket.ts","./src/app/tower-defense/tower-defense-game/tower/tower.ts","./src/app/tower-defense/tower-defense-routing.module.ts","./src/app/tower-defense/tower-defense.module.ts","./src/utils/graph.ts"],"names":[],"mappings":"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","file":"tower-defense.module.chunk.js","sourcesContent":["import { Observable } from 'rxjs/Observable';\nimport { Subject } from 'rxjs/Subject';\n\nimport {\n  Enemy,\n  GreenMinion,\n  WhiteMinion,\n  BrownMinion,\n  GreyMinion,\n  GreenTank,\n  WhiteTank,\n  GreenPlane,\n  WhitePlane,\n  GreenCannon,\n  WhiteCannon,\n} from './enemy';\n\nexport interface EnemyType {\n  type: string;\n  constructors: Array<typeof Enemy>;\n  weight: (level: number) => number;\n}\n\nexport class EnemySpawner {\n  static enemyTypes: EnemyType[] = [{\n    type: 'minion',\n    constructors: [GreenMinion, WhiteMinion, BrownMinion, GreyMinion],\n    weight(level) {\n      return Math.max(5, 100 - level * 10);\n    },\n  }, {\n    type: 'tank',\n    constructors: [GreenTank, WhiteTank],\n    weight(level) {\n      return Math.min(35, Math.max(0, -5 + level * 15));\n    },\n  }, {\n    type: 'plane',\n    constructors: [GreenPlane, WhitePlane],\n    weight(level) {\n      return Math.min(20, Math.max(0, -15 + level * 10));\n    },\n  }, {\n    type: 'cannon',\n    constructors: [GreenCannon, WhiteCannon],\n    weight(level) {\n      return Math.min(40, Math.max(0, -40 + level * 20));\n    },\n  }];\n\n  private numEnemies = 0;\n  private ellapsed = 0;\n  private rate: number;\n  private maxEnemies: number;\n  private maxTime: number;\n  private subject: Subject<typeof Enemy>;\n  private rng: Phaser.Math.RandomDataGenerator;\n  private enemyTypes: EnemyType[];\n  private cumulativeWeights: number[];\n\n  constructor(private level: number, isInfinite = false) {\n    this.rate = Math.min(10, Math.sqrt(level + 1));\n    this.maxTime = 60000 + this.level * 10000;\n    this.maxEnemies = this.rate * (this.maxTime / 1000 + 10);\n    if (isInfinite) {\n      this.maxTime = -1;\n      this.maxEnemies = -1;\n    }\n    this.rng = new Phaser.Math.RandomDataGenerator([Date.now().toString()]);\n    this.cumulativeWeights = EnemySpawner.enemyTypes.map((enemyType) => {\n      return enemyType.weight(this.level);\n    });\n    const total = this.cumulativeWeights.reduce((s, e) => s + e, 0);\n    for (let i = 0; i < this.cumulativeWeights.length; i++) {\n      if (i === 0) {\n        this.cumulativeWeights[i] /= total;\n      } else {\n        this.cumulativeWeights[i] = this.cumulativeWeights[i] / total + this.cumulativeWeights[i - 1];\n      }\n    }\n  }\n\n  startSpawn(): Observable<any> {\n    this.subject = new Subject();\n    this.numEnemies = 0;\n    this.ellapsed = 0;\n\n    return this.subject.asObservable();\n  }\n\n  update(dt: number) {\n    this.ellapsed += dt;\n\n    if (this.subject) {\n      if (this.maxEnemies > 0 && this.maxEnemies <= this.numEnemies || this.maxTime > 0 && this.ellapsed >= this.maxTime) {\n        this.subject.complete();\n        this.subject = null;\n        return;\n      }\n\n      const rate = this.rate * dt / 1000;\n      if (rate > 1) {\n        const count = Math.floor(rate);\n        for (let i = 0; i < count; i++) {\n          if (this.maxEnemies < 0 || this.maxEnemies > this.numEnemies) {\n            this.spawn();\n          } else {\n            break;\n          }\n        }\n      } else if (this.rng.frac() < rate) {\n        this.spawn();\n      }\n    }\n  }\n\n  private spawn(): void {\n    const rand = this.rng.frac();\n    let i: number;\n    for (i = 0; i < this.cumulativeWeights.length; i++) {\n      if (rand < this.cumulativeWeights[i]) {\n        break;\n      }\n    }\n    const ctors = EnemySpawner.enemyTypes[i].constructors;\n    this.subject.next(ctors[Phaser.Math.Between(0, ctors.length - 1)]);\n    this.numEnemies += 1;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/tower-defense/tower-defense-game/enemy-spawner.ts","import { Enemy } from './enemy';\n\nexport class BrownMinion extends Enemy {\n  protected setup(): void {\n    this.speed = 96;\n    this.hp = 200;\n    this.damage = 16;\n    this.boxWidth = 16;\n    this.boxHeight = 26;\n    this.frameNumber = 247;\n    this.coins = 100;\n    this.score = 100;\n    super.setup();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/tower-defense/tower-defense-game/enemy/brown-minion.ts","import * as Phaser from 'phaser';\n\nexport class Enemy extends Phaser.Physics.Arcade.Sprite {\n  protected speed: number;\n  protected hp: number;\n  protected damage: number;\n  protected boxWidth: number;\n  protected boxHeight: number;\n  protected frameNumber: number;\n  protected coins: number;\n  protected score: number;\n  protected moveTimeline: Phaser.Tweens.Timeline;\n  protected resetTintEvent: Phaser.Time.TimerEvent;\n\n  constructor(scene: Phaser.Scene, protected path: number[][]) {\n    super(scene, path[0][0] * 64, path[0][1] * 64, 'spritesheet');\n    this.scene.add.existing(this);\n    this.scene.physics.add.existing(this);\n    this.setup();\n  }\n\n  protected setup(): void {\n    this.setSize(this.boxWidth, this.boxHeight);\n    this.setFrame(this.frameNumber);\n    this.setDepth(this.path[0][1] * 64 + Math.max(this.boxWidth, this.boxHeight));\n    const tweens = this.path.slice(1).map(([x, y], i) => ({\n      targets: this,\n      duration: (Math.abs(this.path[i + 1][0] - this.path[i][0]) + Math.abs(this.path[i + 1][1] - this.path[i][1])) * 64 / this.speed * 1000,\n      ease: 'Linear',\n      repeat: false,\n      props: {\n        x: x * 64,\n        y: y * 64,\n        depth: y * 64 + Math.max(this.boxWidth, this.boxHeight),\n      },\n      onStart: () => {\n        let angle: number;\n        const [x0, y0] = this.path[i];\n        if (x > x0) {\n          angle = 0;\n          this.setSize(this.boxWidth, this.boxHeight);\n        } else if (x < x0) {\n          angle = Math.PI;\n          this.setSize(this.boxWidth, this.boxHeight);\n        } else if (y > y0) {\n          angle = Math.PI / 2;\n          this.setSize(this.boxHeight, this.boxWidth);\n        } else {\n          angle = 3 * Math.PI / 2;\n          this.setSize(this.boxHeight, this.boxWidth);\n        }\n        this.setRotation(angle);\n      },\n    }));\n    this.moveTimeline = this.scene.tweens.timeline({\n      tweens,\n    });\n  }\n\n  getDamage(): number {\n    return this.damage;\n  }\n\n  getCoins(): number {\n    return this.coins;\n  }\n\n  getScore(): number {\n    return this.score;\n  }\n\n  cleanup(): void {\n    this.moveTimeline.destroy();\n    if (this.resetTintEvent) {\n      this.resetTintEvent.destroy();\n    }\n  }\n\n  onDamage(damage: number): void {\n    this.hp -= damage;\n    if (this.hp <= 0) {\n      this.scene.events.emit('enemyDestroyed', this);\n    } else {\n      this.setTint(0xff0000);\n      if (this.resetTintEvent) {\n        this.resetTintEvent.destroy();\n      }\n      this.resetTintEvent = this.scene.time.delayedCall(200, () => {\n        this.setTint(0xffffff);\n      }, null, this);\n    }\n  }\n\n  onDestroy(group?: Phaser.GameObjects.Group): void {\n    this.cleanup();\n    this.destroy();\n    if (group) {\n      group.remove(this, true, true);\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/tower-defense/tower-defense-game/enemy/enemy.ts","import { Enemy } from './enemy';\n\nexport class GreenCannon extends Enemy {\n  protected setup(): void {\n    this.speed = 96;\n    this.hp = 300;\n    this.damage = 25;\n    this.boxWidth = 47;\n    this.boxHeight = 20;\n    this.frameNumber = 291;\n    this.coins = 100;\n    this.score = 200;\n    super.setup();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/tower-defense/tower-defense-game/enemy/green-cannon.ts","import { Enemy } from './enemy';\n\nexport class GreenMinion extends Enemy {\n  protected setup(): void {\n    this.speed = 96;\n    this.hp = 200;\n    this.damage = 16;\n    this.boxWidth = 20;\n    this.boxHeight = 25;\n    this.frameNumber = 245;\n    this.coins = 100;\n    this.score = 100;\n    super.setup();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/tower-defense/tower-defense-game/enemy/green-minion.ts","import { Enemy } from './enemy';\n\nexport class GreenPlane extends Enemy {\n  protected setup(): void {\n    this.speed = 192;\n    this.hp = 100;\n    this.damage = 64;\n    this.boxWidth = 43;\n    this.boxHeight = 23;\n    this.frameNumber = 270;\n    this.coins = 100;\n    this.score = 1000;\n    super.setup();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/tower-defense/tower-defense-game/enemy/green-plane.ts","import { Enemy } from './enemy';\n\nexport class GreenTank extends Enemy {\n  protected setup(): void {\n    this.speed = 64;\n    this.hp = 1000;\n    this.damage = 48;\n    this.boxWidth = 52;\n    this.boxHeight = 36;\n    this.frameNumber = 268;\n    this.coins = 100;\n    this.score = 500;\n    super.setup();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/tower-defense/tower-defense-game/enemy/green-tank.ts","import { Enemy } from './enemy';\n\nexport class GreyMinion extends Enemy {\n  protected setup(): void {\n    this.speed = 96;\n    this.hp = 200;\n    this.damage = 16;\n    this.boxWidth = 16;\n    this.boxHeight = 26;\n    this.frameNumber = 248;\n    this.coins = 100;\n    this.score = 100;\n    super.setup();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/tower-defense/tower-defense-game/enemy/grey-minion.ts","export { Enemy } from './enemy';\nexport { GreenMinion } from './green-minion';\nexport { WhiteMinion } from './white-minion';\nexport { BrownMinion } from './brown-minion';\nexport { GreyMinion } from './grey-minion';\nexport { GreenTank } from './green-tank';\nexport { WhiteTank } from './white-tank';\nexport { GreenPlane } from './green-plane';\nexport { WhitePlane } from './white-plane';\nexport { GreenCannon } from './green-cannon';\nexport { WhiteCannon } from './white-cannon';\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/tower-defense/tower-defense-game/enemy/index.ts","import { Enemy } from './enemy';\n\nexport class WhiteCannon extends Enemy {\n  protected setup(): void {\n    this.speed = 96;\n    this.hp = 300;\n    this.damage = 25;\n    this.boxWidth = 48;\n    this.boxHeight = 20;\n    this.frameNumber = 292;\n    this.coins = 100;\n    this.score = 200;\n    super.setup();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/tower-defense/tower-defense-game/enemy/white-cannon.ts","import { Enemy } from './enemy';\n\nexport class WhiteMinion extends Enemy {\n  protected setup(): void {\n    this.speed = 96;\n    this.hp = 200;\n    this.damage = 16;\n    this.boxWidth = 16;\n    this.boxHeight = 26;\n    this.frameNumber = 246;\n    this.coins = 100;\n    this.score = 100;\n    super.setup();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/tower-defense/tower-defense-game/enemy/white-minion.ts","import { Enemy } from './enemy';\n\nexport class WhitePlane extends Enemy {\n  protected setup(): void {\n    this.speed = 192;\n    this.hp = 100;\n    this.damage = 64;\n    this.boxWidth = 43;\n    this.boxHeight = 23;\n    this.frameNumber = 271;\n    this.coins = 100;\n    this.score = 1000;\n    super.setup();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/tower-defense/tower-defense-game/enemy/white-plane.ts","import { Enemy } from './enemy';\n\nexport class WhiteTank extends Enemy {\n  protected setup(): void {\n    this.speed = 64;\n    this.hp = 1000;\n    this.damage = 48;\n    this.boxWidth = 52;\n    this.boxHeight = 36;\n    this.frameNumber = 269;\n    this.coins = 100;\n    this.score = 500;\n    super.setup();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/tower-defense/tower-defense-game/enemy/white-tank.ts","import * as Phaser from 'phaser';\n\nimport { Enemy } from './enemy';\n\nexport class HolyLeaf extends Phaser.Physics.Arcade.Sprite {\n  private maxHP: number = 100;\n  private hp: number = 100;\n  private frameNumber: number = 134;\n  private collisionRadius: number = 24;\n  private tween: Phaser.Tweens.Tween;\n\n  constructor(scene: Phaser.Scene, x: number, y: number) {\n    super(scene, x, y, 'spritesheet');\n    scene.add.existing(this);\n    scene.physics.add.existing(this);\n    this.setDepth(y + 32);\n    this.setFrame(this.frameNumber);\n    this.setCircle(this.collisionRadius, -this.collisionRadius + 32, -this.collisionRadius + 32);\n    this.tween = scene.tweens.add({\n      targets: this,\n      rotation: Math.PI * 2,\n      loop: -1,\n      duration: 6000,\n      ease: 'Linear',\n    });\n  }\n\n  getHit(enemy: Enemy) {\n    this.hp -= enemy.getDamage();\n    this.setTint(0xff00ff + 0xff00 * this.hp / this.maxHP);\n    this.scene.events.emit('enemyDestroyed', enemy);\n    if (this.hp <= 0) {\n      this.scene.events.emit('leafDestroyed');\n      this.cleanup();\n      this.destroy();\n    }\n  }\n\n  cleanup(): void {\n    this.tween.stop();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/tower-defense/tower-defense-game/holy-leaf.ts","import * as Phaser from 'phaser';\n\nimport { PathGenerator } from './path-generator';\n\nexport interface Tileset {\n  TOP_LEFT_INNER: number;\n  TOP_RIGHT_INNER: number;\n  BOTTOM_LEFT_INNER: number;\n  BOTTOM_RIGHT_INNER: number;\n  TOP_LEFT_OUTER: number;\n  TOP_RIGHT_OUTER: number;\n  BOTTOM_LEFT_OUTER: number;\n  BOTTOM_RIGHT_OUTER: number;\n  TOP: number;\n  BOTTOM: number;\n  LEFT: number;\n  RIGHT: number;\n  MIDDLE: number;\n  COIN: number;\n  SIDE: number;\n}\n\nconst TILE_OFFSETS: Tileset = {\n  TOP_LEFT_INNER: 48,\n  TOP_RIGHT_INNER: 46,\n  BOTTOM_LEFT_INNER: 2,\n  BOTTOM_RIGHT_INNER: 0,\n  TOP_LEFT_OUTER: 3,\n  TOP_RIGHT_OUTER: 4,\n  BOTTOM_LEFT_OUTER: 26,\n  BOTTOM_RIGHT_OUTER: 27,\n  TOP: 47,\n  BOTTOM: 1,\n  LEFT: 25,\n  RIGHT: 23,\n  MIDDLE: 50,\n  COIN: 49,\n  SIDE: 24,\n};\n\nconst TILES: Tileset[] = [];\nfor (let y = 0; y < 4; y++) {\n  for (let x = 0; x < 3; x++) {\n    const offset = y * (3 * 23) + x * 5;\n    const tiles: { [key: string]: number } = {};\n    for (let [key, value] of Object.entries(TILE_OFFSETS)) {\n      tiles[key] = value + offset;\n    }\n    TILES.push(tiles as any as Tileset);\n  }\n}\n\nexport class LevelMap {\n  private startNodes: number[][];\n  private endNodes: number[][];\n  private map: number[][];\n  private path: { [start: number]: number };\n  private xyPath: number[][];\n\n  constructor(private width: number, private height: number, private scene: Phaser.Scene) {\n  }\n\n  init(hardcodedPath?: number[]) {\n    const pathGeneratorWidth = Math.ceil(this.width / 2);\n    const pathGeneratorHeight = Math.ceil(this.height / 2);\n    let path: number[];\n    if (hardcodedPath) {\n      path = hardcodedPath;\n    } else {\n      const pathGenerator = new PathGenerator(pathGeneratorWidth, pathGeneratorHeight);\n      path = pathGenerator.generate(pathGeneratorWidth + pathGeneratorHeight);\n    }\n\n    this.map = Array<number[]>(this.height)\n      .fill(null)\n      .map(() => Array<number>(this.width).fill(0));\n    for (let node of path) {\n      const y = Math.floor(node / pathGeneratorWidth);\n      const x = node % pathGeneratorWidth;\n      if (y * 2 < this.height && x * 2 < this.width) {\n        this.map[y * 2][x * 2] = 1;\n      }\n      if (y * 2 + 1 < this.height && x * 2 < this.width) {\n        this.map[y * 2 + 1][x * 2] = 1;\n      }\n      if (y * 2 < this.height && x * 2 + 1 < this.width) {\n        this.map[y * 2][x * 2 + 1] = 1;\n      }\n      if (y * 2 + 1 < this.height && x * 2 + 1 < this.width) {\n        this.map[y * 2 + 1][x * 2 + 1] = 1;\n      }\n    }\n    const startNode = path[0];\n    const startNodeY = 2 * Math.floor(startNode / pathGeneratorWidth);\n    const startNodeX = 2 * (startNode % pathGeneratorWidth);\n    this.startNodes = [];\n    if (startNodeX === 0) {\n      this.startNodes.push([startNodeX, startNodeY], [startNodeX, startNodeY + 1]);\n    }\n    if (startNodeX === this.width - 2) {\n      this.startNodes.push([startNodeX + 1, startNodeY], [startNodeX + 1, startNodeY + 1]);\n    }\n    if (startNodeY === 0) {\n      this.startNodes.push([startNodeX, startNodeY], [startNodeX + 1, startNodeY]);\n    }\n    if (startNodeY === this.height - 2) {\n      this.startNodes.push([startNodeX, startNodeY + 1], [startNodeX + 1, startNodeY + 1]);\n    }\n\n    const endNode = path[path.length - 1];\n    const endNodeY = 2 * Math.floor(endNode / pathGeneratorWidth);\n    const endNodeX = 2 * (endNode % pathGeneratorWidth);\n    this.endNodes = [];\n    if (endNodeX === 0) {\n      this.endNodes.push([endNodeX, endNodeY], [endNodeX, endNodeY + 1]);\n    }\n    if (endNodeX === this.width - 2) {\n      this.endNodes.push([endNodeX + 1, endNodeY], [endNodeX + 1, endNodeY + 1]);\n    }\n    if (endNodeY === 0) {\n      this.endNodes.push([endNodeX, endNodeY], [endNodeX + 1, endNodeY]);\n    }\n    if (endNodeY === this.height - 2) {\n      this.endNodes.push([endNodeX, endNodeY + 1], [endNodeX + 1, endNodeY + 1]);\n    }\n\n    const [startX, startY] = this.getSpawnPoint();\n    this.path = {};\n    this.xyPath = [[startX, startY]];\n    let lastPoint = startY * this.width + startX;\n    for (let node of path) {\n      const y = Math.floor(node / pathGeneratorWidth) * 2 + 1;\n      const x = node % pathGeneratorWidth * 2 + 1;\n      const point = y * this.width + x;\n      this.path[lastPoint] = point;\n      lastPoint = point;\n      this.xyPath.push([x, y]);\n    }\n  }\n\n  create() {\n    const tileset = TILES[Math.floor(Math.random() * TILES.length)];\n    const data: number[][] = [];\n    for (let y = 0; y < this.map.length; y++) {\n      const row = [];\n      for (let x = 0; x < this.map[y].length; x++) {\n        let currentTile: number;\n        if (this.map[y][x]) {\n          const isTerminal = this.isTerminalNode(x, y);\n          const isTop = y === 0 && !isTerminal || y > 0 && !this.map[y - 1][x];\n          const isLeft = x === 0 && !isTerminal || x > 0 && !this.map[y][x - 1]\n          const isRight = x === this.map[y].length - 1 && !isTerminal || x < this.map[y].length - 1 && !this.map[y][x + 1];\n          const isBottom = y === this.map.length - 1 && !isTerminal || y < this.map.length - 1 && !this.map[y + 1][x];\n          if (isTop) {\n            if (isLeft) {\n              currentTile = tileset.TOP_LEFT_OUTER;\n            } else if (isRight) {\n              currentTile = tileset.TOP_RIGHT_OUTER;\n            } else {\n              currentTile = tileset.TOP;\n            }\n          } else if (isBottom) {\n            if (isLeft) {\n              currentTile = tileset.BOTTOM_LEFT_OUTER;\n            } else if (isRight) {\n              currentTile = tileset.BOTTOM_RIGHT_OUTER;\n            } else {\n              currentTile = tileset.BOTTOM;\n            }\n          } else if (isLeft) {\n            currentTile = tileset.LEFT;\n          } else if (isRight) {\n            currentTile = tileset.RIGHT;\n          } else {\n            if (x > 0 && y > 0 && !this.map[y - 1][x - 1]) {\n              currentTile = tileset.TOP_LEFT_INNER;\n            } else if (x < this.map[y].length - 1 && y > 0 && !this.map[y - 1][x + 1]) {\n              currentTile = tileset.TOP_RIGHT_INNER;\n            } else if (x > 0 && y < this.map.length - 1 && !this.map[y + 1][x - 1]) {\n              currentTile = tileset.BOTTOM_LEFT_INNER;\n            } else if (x < this.map[y].length - 1 && y < this.map.length - 1 && !this.map[y + 1][x + 1]) {\n              currentTile = tileset.BOTTOM_RIGHT_INNER;\n            } else {\n              currentTile = tileset.MIDDLE;\n            }\n          }\n        } else {\n          currentTile = tileset.SIDE;\n        }\n        row.push(currentTile);\n      }\n      data.push(row);\n    }\n\n    const map = this.scene.make.tilemap({\n      data,\n      tileWidth: 64,\n      tileHeight: 64,\n    });\n    const tiles = map.addTilesetImage('spritesheet');\n    const layer = map.createStaticLayer(0, tiles, 0, 0);\n  }\n\n  getSpawnPoint(): number[] {\n    const [startNodeX, startNodeY] = this.startNodes[1];\n\n    if (startNodeX === 0) {\n      return [startNodeX - 1, startNodeY];\n    } else if (startNodeX === this.width - 1) {\n      return [startNodeX + 1, startNodeY];\n    } else if (startNodeY === 0) {\n      return [startNodeX, startNodeY - 1];\n    } else {\n      return [startNodeX, startNodeY + 1];\n    }\n  }\n\n  getNextPoint(x: number, y: number): number[] {\n    const point = y * this.width + x;\n    const nextPoint = this.path[point];\n    if (typeof nextPoint === 'number') {\n      return [nextPoint % this.width, Math.floor(nextPoint / this.width)];\n    }\n    return null;\n  }\n\n  getLastPoint(): number[] {\n    return this.xyPath[this.xyPath.length - 1];\n  }\n\n  getWholePath(): number[][] {\n    return this.xyPath;\n  }\n\n  isEmptySlot(x: number, y: number): boolean {\n    if (y < 0 || x < 0 || y > this.map.length - 1 || x > this.map[y].length - 1) {\n      return false;\n    }\n    return this.map[y][x] === 0;\n  }\n\n  fillSlot(x: number, y: number): void {\n    this.map[y][x] = 2;\n  }\n\n  private isTerminalNode(x: number, y: number): boolean {\n    const startNode = this.startNodes.find((node) => node[0] === x && node[1] === y);\n    if (startNode) {\n      return true;\n    }\n    const endNode = this.endNodes.find((node) => node[0] === x && node[1] === y);\n    if (endNode) {\n      return true;\n    }\n    return false;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/tower-defense/tower-defense-game/level-map.ts","import { Graph } from '../../../utils/graph';\n\nexport class PathGenerator {\n  constructor(private width: number, private height: number) {\n  }\n\n  generate(minWidth: number = this.width): number[] {\n    const graph = new Graph();\n    for (let y = 0; y < this.height; y++) {\n      for (let x = 0; x < this.width; x++) {\n        graph.addVertex(y * this.width + x);\n      }\n    }\n    for (let y = 0; y < this.height; y++) {\n      for (let x = 0; x < this.width; x++) {\n        if (y < this.height - 1) {\n          graph.addEdge(y * this.width + x, (y + 1) * this.width + x);\n        }\n        if (x < this.width - 1) {\n          graph.addEdge(y * this.width + x, y * this.width + (x + 1));\n        }\n      }\n    }\n\n    let tree = graph.growTree();\n    let startX: number;\n    let startY: number;\n    let endX: number;\n    let endY: number;\n    let path: number[];\n    let retryCount = 0;\n\n    do {\n      if (retryCount > 10) {\n        tree = graph.growTree();\n        retryCount = 0;\n      }\n      do {\n        [startX, startY] = this.getRandomPointAtEdge();\n        [endX, endY] = this.getRandomPointAtEdge();\n      } while (Math.abs(startX - endX) + Math.abs(startY - endY) < 2);\n      path = tree.search(startY * this.width + startX, endY * this.width + endX);\n      this.shortcut(path);\n      retryCount += 1;\n    } while (path.length < minWidth);\n\n    return path;\n  }\n\n  getRandomPointAtEdge() {\n    const isAtHorizontalEdge = Math.random() < 0.5;\n    let x: number;\n    let y: number;\n    if (isAtHorizontalEdge) {\n      x = Math.floor(Math.random() * (this.width - 2)) + 1;\n      y = Math.random() < 0.5 ? 0 : this.height - 1;\n    } else {\n      x = Math.random() < 0.5 ? 0 : this.width - 1;\n      y = Math.floor(Math.random() * (this.height - 2)) + 1;\n    }\n    return [x, y];\n  }\n\n  shortcut(path: number[]): void {\n    let hasShortcut = true;\n    while (hasShortcut) {\n      hasShortcut = false;\n      for (let i = 0; i < path.length - 2; i++) {\n        const y = Math.floor(path[i] / this.width);\n        const x = path[i] % this.width;\n        for (let j = i + 2; j < path.length; j++) {\n          const y2 = Math.floor(path[j] / this.width);\n          const x2 = path[j] % this.width;\n          if (Math.abs(y - y2) + Math.abs(x - x2) <= 1) {\n            path.splice(i + 1, j - i - 1);\n            hasShortcut = true;\n            break;\n          }\n        }\n        if (hasShortcut) {\n          break;\n        }\n      }\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/tower-defense/tower-defense-game/path-generator.ts","import * as Phaser from 'phaser';\nimport { Subscription } from 'rxjs/Subscription';\n\nimport { LevelMap } from './level-map';\nimport { HolyLeaf } from './holy-leaf';\nimport { Enemy } from './enemy';\nimport { EnemySpawner } from './enemy-spawner';\nimport { TowerShop } from './tower-shop';\nimport { Tower } from './tower';\nimport { Projectile } from './projectile';\n\nexport class PlayScene extends Phaser.Scene {\n  private levelMap: LevelMap;\n  private enemySpawner: EnemySpawner;\n  private subscription: Subscription;\n  private holyLeaf: HolyLeaf;\n  private towerShop: TowerShop;\n  private enemyGroup: Phaser.Physics.Arcade.Group;\n  private towerGroup: Phaser.Physics.Arcade.Group;\n  private projectileGroup: Phaser.Physics.Arcade.Group;\n  private statGroup: Phaser.GameObjects.Group;\n  private gameover: boolean;\n  private score: number;\n  private coins: number;\n  private level: number;\n  private spawningEnded: boolean;\n  private towerShadow: Phaser.GameObjects.Sprite;\n  private rangeIndicator: Phaser.GameObjects.Graphics;\n  private aoeCircles: Array<[Phaser.Geom.Circle, number]>;\n  private particles: Phaser.GameObjects.Particles.ParticleEmitterManager;\n  private explodeSound: Phaser.Sound.BaseSound;\n\n  constructor() {\n    super({ key: 'PlayScene' })\n  }\n\n  init({ coins, score, level }: { coins: number, score: number, level: number }) {\n    const mapWidth = this.sys.canvas.width / 64;\n    const mapHeight = this.sys.canvas.height / 64;\n    this.levelMap = new LevelMap(mapWidth, mapHeight, this);\n    this.levelMap.init();\n    this.enemySpawner = new EnemySpawner(level);\n    this.gameover = false;\n    this.score = score;\n    this.level = level;\n    this.coins = coins;\n    this.spawningEnded = false;\n    this.aoeCircles = [];\n  }\n\n  preload() {\n    this.load.spritesheet(\n      'spritesheet',\n      'assets/tower-defense/tilesheet/tilesheet.png',\n      { frameWidth: 64, frameHeight: 64 },\n    );\n    this.load.atlas(\n      'explosion',\n      'assets/tower-defense/particles/explosion.png',\n      'assets/tower-defense/particles/explosion.json',\n    );\n    this.load.audio('music', [\n      'assets/tower-defense/sounds/music.ogg',\n      'assets/tower-defense/sounds/music.mp3',\n    ], undefined, undefined);\n    this.load.audio('explode', [\n      'assets/tower-defense/sounds/explode.wav',\n    ], undefined, undefined);\n    this.load.audio('hit', [\n      'assets/tower-defense/sounds/hit.wav',\n    ], undefined, undefined);\n    this.load.audio('coin', [\n      'assets/tower-defense/sounds/coin.wav',\n    ], undefined, undefined);\n    this.load.audio('victory', [\n      'assets/tower-defense/sounds/victory.wav',\n    ], undefined, undefined);\n    this.load.audio('defeat', [\n      'assets/tower-defense/sounds/defeat.wav',\n    ], undefined, undefined);\n    this.load.audio('disallowed', [\n      'assets/tower-defense/sounds/disallowed.wav',\n    ], undefined, undefined);\n  }\n\n  create() {\n    this.cameras.main.fadeIn(1000, 255, 255, 255);\n    this.explodeSound = this.sound.add('explode');\n    this.particles = this.add.particles('explosion');\n    this.particles.createEmitter({\n      frame: ['smoke-puff', 'cloud', 'smoke-puff'],\n      lifespan: 2000,\n      quantity: 6,\n      angle: { min: 0, max: 359 },\n      speed: { min: 16, max: 32 },\n      scale: { start: 0.5, end: 0.25 },\n      alpha: { start: 0.8, end: 0 },\n      on: false,\n    });\n    this.towerShop = new TowerShop(this);\n    this.towerShop.create();\n    this.towerShadow = this.add.sprite(0, 0, 'spritesheet');\n    this.towerShadow.setAlpha(0.5);\n    this.towerShadow.setVisible(false);\n    this.rangeIndicator = this.add.graphics();\n    this.rangeIndicator.setAlpha(0.5);\n    this.rangeIndicator.setVisible(false);\n    this.statGroup = this.add.group(null, null);\n    this.towerGroup = this.physics.add.group();\n    this.enemyGroup = this.physics.add.group();\n    this.projectileGroup = this.physics.add.group();\n    this.levelMap.create();\n    const [lastX, lastY] = this.levelMap.getLastPoint();\n    this.holyLeaf = new HolyLeaf(this, lastX * 64, lastY * 64);\n    this.updateStatGroup();\n\n    (this.physics.add.collider as any)(this.holyLeaf, this.enemyGroup, (holyLeaf: HolyLeaf, enemy: Enemy) => {\n      holyLeaf.getHit(enemy);\n      this.cameras.main.shake(100, 0.01);\n    });\n    (this.physics.add.collider as any)(this.projectileGroup, this.enemyGroup, (projectile: Projectile, enemy: Enemy) => {\n      if (projectile.isAOE()) {\n        this.aoeCircles.push([\n          new Phaser.Geom.Circle(projectile.x, projectile.y, projectile.getAOERadius()),\n          projectile.getDamage(),\n        ]);\n        this.explodeSound.stop();\n        this.explodeSound.play();\n        this.particles.emitParticleAt(projectile.x, projectile.y, 6);\n      } else {\n        this.sound.play('hit', { volume: 0.3 });\n        enemy.onDamage(projectile.getDamage());\n      }\n      projectile.onDestroy(this.projectileGroup);\n    });\n    (this.physics.add.overlap as any)(this.towerGroup, this.enemyGroup, (tower: Tower, enemy: Enemy) => {\n      if (!tower.getTarget()) {\n        tower.setTarget(enemy);\n      }\n    });\n    this.events.once('leafDestroyed', () => {\n      this.holyLeaf = null;\n      this.gameover = true;\n      this.tweens.killAll();\n      this.cameras.main.flash();\n      this.cameras.main.fadeOut(1000, 0, 0, 0, (camera: Phaser.Cameras.Scene2D.Camera, progress: number) => {\n        if (progress < 1) {\n          return;\n        }\n        this.onGameover();\n        this.cameras.main.fadeIn(1000, 0, 0, 0);\n      }, this);\n    });\n    this.events.on('enemyDestroyed', (enemy: Enemy) => {\n      this.increaseStats({\n        coins: enemy.getCoins(),\n        score: enemy.getScore(),\n      });\n      (this.particles as any).setDepth(enemy.y + 64);\n      this.explodeSound.stop();\n      this.explodeSound.play();\n      this.particles.emitParticleAt(enemy.x, enemy.y, 6);\n      enemy.onDestroy(this.enemyGroup);\n    });\n    this.events.on('projectilesCreated', (projectiles: Projectile[]) => {\n      this.projectileGroup.addMultiple(projectiles);\n    });\n    this.events.on('projectileExploded', (projectile: Projectile) => {\n      if (projectile.isAOE()) {\n        this.aoeCircles.push([\n          new Phaser.Geom.Circle(projectile.x, projectile.y, projectile.getAOERadius()),\n          projectile.getDamage(),\n        ]);\n        this.explodeSound.stop();\n        this.explodeSound.play();\n        this.particles.emitParticleAt(projectile.x, projectile.y, 6);\n      }\n      projectile.onDestroy(this.projectileGroup);\n    });\n    this.input.on('pointermove', (pointer: Phaser.Input.Pointer) => {\n      if(!this.towerShop.handlePointerMove(pointer)) {\n        return;\n      }\n      const towerConstructor = this.towerShop.getSelectedTower();\n      if (!towerConstructor) {\n        return;\n      }\n      const mapX = Math.floor(pointer.x / 64);\n      const mapY = Math.floor(pointer.y / 64);\n      if (!this.levelMap.isEmptySlot(mapX, mapY)) {\n        this.towerShadow.setVisible(false);\n        this.rangeIndicator.setVisible(false);\n        return;\n      }\n      this.towerShadow.setPosition(mapX * 64 + 32, mapY * 64 + 32);\n      this.towerShadow.setDepth(mapY * 64 + 32);\n      this.towerShadow.setFrame(towerConstructor.frameNumber);\n      this.towerShadow.setVisible(true);\n      this.towerShadow.setTint(this.coins < towerConstructor.cost ? 0xff9999 : 0xffffff);\n      this.rangeIndicator.clear();\n      const circle = new Phaser.Geom.Circle(mapX * 64 + 32, mapY * 64 + 32, towerConstructor.radius);\n      this.rangeIndicator.fillStyle(this.coins < towerConstructor.cost ? 0xff9999 : 0xffffff, 0.5);\n      this.rangeIndicator.fillCircleShape(circle);\n      this.rangeIndicator.setDepth(mapY * 64 + 32);\n      this.rangeIndicator.setVisible(true);\n    });\n    this.input.on('pointerdown', (pointer: Phaser.Input.Pointer) => {\n      if (!this.towerShop.handlePointerDown(pointer)) {\n        return;\n      }\n      const towerConstructor = this.towerShop.getSelectedTower();\n      if (!towerConstructor) {\n        return;\n      }\n      if (this.coins < towerConstructor.cost) {\n        this.sound.play('disallowed', { volume: 0.5 });\n        return;\n      }\n      const mapX = Math.floor(pointer.x / 64);\n      const mapY = Math.floor(pointer.y / 64);\n      if (!this.levelMap.isEmptySlot(mapX, mapY)) {\n        return;\n      }\n      this.increaseStats({\n        coins: -towerConstructor.cost,\n      });\n      const tower = new towerConstructor(this, Math.floor(pointer.x / 64) * 64 + 32, Math.floor(pointer.y / 64) * 64 + 32);\n      this.towerGroup.add(tower);\n      this.levelMap.fillSlot(mapX, mapY);\n      this.towerShadow.setVisible(false);\n      this.rangeIndicator.setVisible(false);\n      this.sound.play('coin', { volume: 0.5 });\n    });\n    this.time.delayedCall(5000, () => {\n      this.subscription = this.enemySpawner.startSpawn().subscribe((ctor: typeof Enemy) => {\n        const enemy = new ctor(this, this.levelMap.getWholePath());\n        this.enemyGroup.add(enemy);\n      }, null, () => this.spawningEnded = true);\n      this.sound.play('music', { loop: true, volume: 0.5 });\n    }, null, this);\n  }\n\n  update(t: number, dt: number) {\n    if (this.gameover) {\n      return;\n    }\n    if (this.spawningEnded && !this.enemyGroup.getLength()) {\n      this.gameover = true;\n      this.tweens.killAll();\n      this.cameras.main.fadeOut(1000, 255, 255, 255, (camera: Phaser.Cameras.Scene2D.Camera, progress: number) => {\n        if (progress < 1) {\n          return;\n        }\n        this.onWin();\n        this.cameras.main.fadeIn(1000, 255, 255, 255);\n      }, this);\n      return;\n    }\n    this.enemySpawner.update(dt);\n    this.towerGroup.getChildren().forEach((tower: Tower) => tower.tick(t, dt));\n    this.projectileGroup.getChildren().forEach((projectile: Projectile) => projectile.tick(t, dt));\n    if (this.aoeCircles.length) {\n      const children = this.enemyGroup.getChildren();\n      for (let i = children.length - 1; i >= 0; i--) {\n        const enemy = children[i] as Enemy;\n        const body = enemy.body as Phaser.Physics.Arcade.Body;\n        const bounds = body.getBounds({} as any);\n        const x = bounds.x;\n        const y = bounds.y;\n        const w = bounds.right - x;\n        const h = bounds.bottom - y;\n        const rect = new Phaser.Geom.Rectangle(x, y, w, h);\n        this.aoeCircles.forEach(([circle, damage]) => {\n          if (!enemy.active) {\n            return;\n          }\n          if (Phaser.Geom.Intersects.CircleToRectangle(circle, rect)) {\n            this.sound.play('hit', { volume: 0.3 });\n            enemy.onDamage(damage);\n          }\n        });\n      }\n      this.aoeCircles = [];\n    }\n  }\n\n  cleanup() {\n    this.sound.stopAll();\n    this.input.removeAllListeners();\n    if (this.subscription) {\n      this.subscription.unsubscribe();\n      this.subscription = null;\n    }\n  }\n\n  private increaseStats({ coins = 0, score = 0 } = {}) {\n    this.score += score;\n    this.coins += coins;\n    this.updateStatGroup();\n  }\n\n  private updateStatGroup(): void {\n    this.statGroup.clear(true, true);\n    const y = 16;\n    let x = 16;\n    const levelIcon = this.statGroup.create(x, y, 'spritesheet', 274, true, true) as Phaser.GameObjects.Sprite;\n    levelIcon.setScale(0.5);\n    levelIcon.setAlpha(0.8);\n    levelIcon.setDepth(y + 64);\n    x += 16;\n    (this.level + 1).toString().split('').forEach((digit) => {\n      const num = this.statGroup.create(x, y, 'spritesheet', 276 + +digit, true, true) as Phaser.GameObjects.Sprite;\n      num.setScale(0.5);\n      num.setAlpha(0.8);\n      num.setDepth(y + 64);\n      x += 16;\n    });\n\n    x += 16;\n\n    const scoreIcon = this.statGroup.create(x, y, 'spritesheet', 275, true, true) as Phaser.GameObjects.Sprite;\n    scoreIcon.setScale(0.5);\n    scoreIcon.setAlpha(0.8);\n    scoreIcon.setDepth(y + 64);\n    x += 16;\n    (this.score).toString().split('').forEach((digit) => {\n      const num = this.statGroup.create(x, y, 'spritesheet', 276 + +digit, true, true) as Phaser.GameObjects.Sprite;\n      num.setScale(0.5);\n      num.setAlpha(0.8);\n      num.setDepth(y + 64);\n      x += 16;\n    });\n\n    x = this.sys.canvas.width - 16;\n    (this.coins).toString().split('').reverse().forEach((digit) => {\n      const num = this.statGroup.create(x, y, 'spritesheet', 276 + +digit, true, true) as Phaser.GameObjects.Sprite;\n      num.setScale(0.5);\n      num.setAlpha(0.8);\n      num.setDepth(y + 64);\n      x -= 16;\n    });\n    const coinsIcon = this.statGroup.create(x, y, 'spritesheet', 272, true, true) as Phaser.GameObjects.Sprite;\n    coinsIcon.setScale(0.5);\n    coinsIcon.setAlpha(0.8);\n    coinsIcon.setDepth(y + 64);\n    x -= 16;\n  }\n\n  private onWin(): void {\n    this.increaseStats({\n      score: (this.level + 1) * 5000,\n      coins: Math.floor(1000 * Math.sqrt(this.level + 1)),\n    });\n\n    const winScreen = this.add.graphics();\n    winScreen.setDepth(this.sys.canvas.height + 1000);\n    winScreen.fillStyle(0x000000, 0.7);\n    winScreen.fillRect(0, 0, this.sys.canvas.width, this.sys.canvas.height);\n    const innerWidth = this.sys.canvas.width * 2 / 3;\n    const innerHeight = this.sys.canvas.height * 2 / 3;\n    const innerOffsetX = (this.sys.canvas.width - innerWidth) / 2;\n    const innerOffsetY = (this.sys.canvas.height - innerHeight) / 2;\n    winScreen.fillRect(innerOffsetX, innerOffsetY, innerWidth, innerHeight);\n\n    const midX = this.sys.canvas.width / 2;\n    const midY = this.sys.canvas.height / 2;\n    const fontSize = 48;\n    const winText = this.add.text(\n      midX,\n      innerOffsetY + fontSize + 64,\n      `LEVEL COMPLETED`,\n      { fontSize, fontStyle: 'bold' },\n    );\n\n    winText.setOrigin(0.5);\n    winText.setDepth(winScreen.depth + 1);\n\n    const continueY = midY + 96;\n    const continueText = this.add.text(\n      midX,\n      continueY,\n      'Click to continue',\n      { fontSize: fontSize * 0.7, fontStyle: 'bold' },\n    );\n    continueText.setOrigin(0.5);\n    continueText.setDepth(winScreen.depth + 1);\n\n    this.cleanup();\n    this.tweens.add({\n      targets: continueText,\n      props: {\n        alpha: 0.5,\n      },\n      ease: 'Power',\n      duration: 500,\n      yoyo: true,\n      repeat: -1,\n    });\n    this.sound.play('victory');\n    this.input.once('pointerup', () => {\n      this.cleanup();\n      this.cameras.main.fadeOut(1000, 255, 255, 255, (camera: Phaser.Cameras.Scene2D.Camera, progress: number) => {\n        if (progress < 1) {\n          return;\n        }\n        this.scene.stop('PlayScene');\n        this.scene.start('PlayScene', {\n          level: this.level + 1,\n          score: this.score,\n          coins: this.coins,\n        });\n      }, this);\n    });\n  }\n\n  private onGameover(): void {\n    const loseScreen = this.add.graphics();\n    loseScreen.setDepth(this.sys.canvas.height + 1000);\n    loseScreen.fillStyle(0x000000, 0.7);\n    loseScreen.fillRect(0, 0, this.sys.canvas.width, this.sys.canvas.height);\n    const innerWidth = this.sys.canvas.width * 2 / 3;\n    const innerHeight = this.sys.canvas.height * 2 / 3;\n    const innerOffsetX = (this.sys.canvas.width - innerWidth) / 2;\n    const innerOffsetY = (this.sys.canvas.height - innerHeight) / 2;\n    loseScreen.fillRect(innerOffsetX, innerOffsetY, innerWidth, innerHeight);\n\n    const midX = this.sys.canvas.width / 2;\n    const midY = this.sys.canvas.height / 2;\n    const fontSize = 64;\n    const gameoverText = this.add.text(\n      midX,\n      innerOffsetY + fontSize + 16,\n      'GAME OVER',\n      { fontSize, fontStyle: 'bold' },\n    );\n\n    gameoverText.setOrigin(0.5);\n    gameoverText.setDepth(loseScreen.depth + 1);\n\n    const highscoreY = midY + 32;\n    const highscoreText = this.add.text(\n      midX,\n      highscoreY,\n      'HIGHSCORE',\n      { fontSize: fontSize * 1.1, fontStyle: 'bold' },\n    );\n    highscoreText.setOrigin(0.5);\n    highscoreText.setDepth(loseScreen.depth + 1);\n\n    const scoreY = highscoreY + fontSize + 16;\n    const scoreText = this.add.text(\n      midX,\n      scoreY,\n      this.score.toString(),\n      { fontSize, fontStyle: 'bold' },\n    );\n    scoreText.setOrigin(0.5);\n    scoreText.setDepth(loseScreen.depth + 1);\n\n    this.cleanup();\n    this.sound.play('defeat');\n    this.input.once('pointerup', () => {\n      this.cleanup();\n      this.cameras.main.fadeOut(1000, 255, 255, 255, (camera: Phaser.Cameras.Scene2D.Camera, progress: number) => {\n        if (progress < 1) {\n          return;\n        }\n        this.scene.stop('PlayScene');\n        this.scene.start('StartScene');\n      }, this);\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/tower-defense/tower-defense-game/play.scene.ts","import * as Phaser from 'phaser';\n\nimport { Projectile } from './projectile';\n\nexport class BigCannon extends Projectile {\n  protected setup(): void {\n    this.damage = 40;\n    this.speed = 384;\n    this.aoe = false;\n    this.size = 17;\n    this.frameNumber = 296;\n    this.angularOffset = Math.PI;\n    super.setup();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/tower-defense/tower-defense-game/projectile/big-cannon.ts","import * as Phaser from 'phaser';\n\nimport { Projectile } from './projectile';\n\nexport class BigRocket extends Projectile {\n  protected setup(): void {\n    this.damage = 200;\n    this.speed = 448;\n    this.aoe = true;\n    this.aoeRadius = 48;\n    this.size = 15;\n    this.frameNumber = 252;\n    this.angularOffset = 0;\n    super.setup();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/tower-defense/tower-defense-game/projectile/big-rocket.ts","export { Projectile } from './projectile';\nexport { SmallCannon } from './small-cannon';\nexport { BigCannon } from './big-cannon';\nexport { SmallRocket } from './small-rocket';\nexport { BigRocket } from './big-rocket';\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/tower-defense/tower-defense-game/projectile/index.ts","import * as Phaser from 'phaser';\n\nimport { Enemy } from '../enemy';\n\nexport class Projectile extends Phaser.Physics.Arcade.Sprite {\n  protected damage: number;\n  protected speed: number;\n  protected aoe: boolean;\n  protected aoeRadius: number;\n  protected size: number;\n  protected frameNumber: number;\n  protected angularOffset: number;\n\n  constructor(\n    scene: Phaser.Scene,\n    x: number,\n    y: number,\n    private target: Enemy,\n  ) {\n    super(scene, x, y, 'spritesheet');\n    scene.add.existing(this);\n    scene.physics.add.existing(this);\n    this.setDepth(y);\n    this.setup();\n  }\n\n  protected setup(): void {\n    this.setFrame(this.frameNumber);\n    this.setCircle(this.size, -this.size + 32, -this.size + 32);\n  }\n\n  tick(t: number, dt: number): void {\n    const xdiff = this.target.x - this.x;\n    const ydiff = this.target.y - this.y;\n    let angle: number;\n    if (ydiff === 0) {\n      angle = xdiff > 0 ? Math.PI / 2 : -Math.PI / 2;\n    } else if (ydiff > 0) {\n      angle = Math.PI - Math.atan(xdiff / ydiff);\n    } else {\n      angle = -Math.atan(xdiff / ydiff);\n    }\n    const xspeed = dt / 1000 * this.speed * Math.sin(angle);\n    const yspeed = dt / 1000 * this.speed * -Math.cos(angle);\n    this.x += xspeed;\n    this.y += yspeed;\n    this.setRotation(angle + this.angularOffset);\n    if (!this.target.active && Math.sqrt(Math.pow(this.x - this.target.x, 2) + Math.pow(this.y - this.target.y, 2)) < 32) {\n      this.scene.events.emit('projectileExploded', this);\n    }\n  }\n\n  getDamage(): number {\n    return this.damage;\n  }\n\n  isAOE(): boolean {\n    return this.aoe;\n  }\n\n  getAOERadius(): number {\n    return this.aoeRadius;\n  }\n\n  onDestroy(group: Phaser.Physics.Arcade.Group): void {\n    this.destroy();\n    group.remove(this, true, true);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/tower-defense/tower-defense-game/projectile/projectile.ts","import * as Phaser from 'phaser';\n\nimport { Projectile } from './projectile';\n\nexport class SmallCannon extends Projectile {\n  protected setup(): void {\n    this.damage = 40;\n    this.speed = 256;\n    this.aoe = false;\n    this.size = 9;\n    this.frameNumber = 295;\n    this.angularOffset = Math.PI;\n    super.setup();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/tower-defense/tower-defense-game/projectile/small-cannon.ts","import * as Phaser from 'phaser';\n\nimport { Projectile } from './projectile';\n\nexport class SmallRocket extends Projectile {\n  protected setup(): void {\n    this.damage = 200;\n    this.speed = 448;\n    this.aoe = true;\n    this.aoeRadius = 48;\n    this.size = 12;\n    this.frameNumber = 251;\n    this.angularOffset = 0;\n    super.setup();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/tower-defense/tower-defense-game/projectile/small-rocket.ts","import * as Phaser from 'phaser';\nimport { Subscription } from 'rxjs/Subscription';\n\nimport { LevelMap } from './level-map';\nimport { Enemy } from './enemy';\nimport { EnemySpawner } from './enemy-spawner';\nimport { Tower, SingleCannon, DoubleCannon } from './tower';\nimport { Projectile } from './projectile';\n\nexport class StartScene extends Phaser.Scene {\n  private levelMap: LevelMap;\n  private particles: Phaser.GameObjects.Particles.ParticleEmitterManager;\n  private enemyGroup: Phaser.Physics.Arcade.Group;\n  private towerGroup: Phaser.Physics.Arcade.Group;\n  private projectileGroup: Phaser.Physics.Arcade.Group;\n  private enemySpawner: EnemySpawner;\n  private subscription: Subscription;\n\n  constructor() {\n    super({ key: 'StartScene' })\n  }\n\n  preload() {\n    this.load.spritesheet(\n      'spritesheet',\n      'assets/tower-defense/tilesheet/tilesheet.png',\n      { frameWidth: 64, frameHeight: 64 },\n    );\n    this.load.atlas(\n      'explosion',\n      'assets/tower-defense/particles/explosion.png',\n      'assets/tower-defense/particles/explosion.json',\n    );\n    this.load.audio('music', [\n      'assets/tower-defense/sounds/music.ogg',\n      'assets/tower-defense/sounds/music.mp3',\n    ], undefined, undefined);\n    this.load.audio('explode', [\n      'assets/tower-defense/sounds/explode.wav',\n    ], undefined, undefined);\n    this.load.audio('hit', [\n      'assets/tower-defense/sounds/hit.wav',\n    ], undefined, undefined);\n    this.load.audio('coin', [\n      'assets/tower-defense/sounds/coin.wav',\n    ], undefined, undefined);\n    this.load.audio('victory', [\n      'assets/tower-defense/sounds/victory.wav',\n    ], undefined, undefined);\n    this.load.audio('defeat', [\n      'assets/tower-defense/sounds/defeat.wav',\n    ], undefined, undefined);\n    this.load.audio('disallowed', [\n      'assets/tower-defense/sounds/disallowed.wav',\n    ], undefined, undefined);\n  }\n\n  init() {\n    const mapWidth = this.sys.canvas.width / 64;\n    const mapHeight = this.sys.canvas.height / 64;\n    this.levelMap = new LevelMap(mapWidth, mapHeight, this);\n    this.levelMap.init([24, 32, 33, 34, 26, 27, 28, 36, 37, 38, 30, 31]);\n    this.enemySpawner = new EnemySpawner(0, true);\n  }\n\n  create() {\n    this.cameras.main.fadeIn(1000, 255, 255, 255);\n    this.towerGroup = this.physics.add.group();\n    this.enemyGroup = this.physics.add.group();\n    this.projectileGroup = this.physics.add.group();\n    this.towerGroup.add(new SingleCannon(this, 2 * 64 + 32, 7 * 64 + 32));\n    this.towerGroup.add(new SingleCannon(this, 3 * 64 + 32, 7 * 64 + 32));\n    this.towerGroup.add(new SingleCannon(this, 10 * 64 + 32, 7 * 64 + 32));\n    this.towerGroup.add(new SingleCannon(this, 11 * 64 + 32, 7 * 64 + 32));\n    this.towerGroup.add(new DoubleCannon(this, 6 * 64 + 32, 8 * 64 + 32));\n    this.towerGroup.add(new DoubleCannon(this, 7 * 64 + 32, 8 * 64 + 32));\n    this.sound.play('music', { loop: true, volume: 0.5 });\n    this.particles = this.add.particles('explosion');\n    this.particles.createEmitter({\n      frame: ['smoke-puff', 'cloud', 'smoke-puff'],\n      lifespan: 2000,\n      quantity: 6,\n      angle: { min: 0, max: 359 },\n      speed: { min: 16, max: 32 },\n      scale: { start: 0.5, end: 0.25 },\n      alpha: { start: 0.8, end: 0 },\n      on: false,\n    });\n    this.levelMap.create();\n    const path = this.levelMap.getWholePath();\n    const reversedPath = path.slice().reverse();\n    reversedPath.unshift([16, 7]);\n    this.subscription = this.enemySpawner.startSpawn().subscribe((ctor: typeof Enemy) => {\n      const enemy = new ctor(this, path);\n      const enemy2 = new ctor(this, reversedPath);\n      this.enemyGroup.addMultiple([enemy, enemy2]);\n    });\n    (this.physics.add.collider as any)(this.projectileGroup, this.enemyGroup, (projectile: Projectile, enemy: Enemy) => {\n      enemy.onDamage(projectile.getDamage());\n      projectile.onDestroy(this.projectileGroup);\n    });\n    (this.physics.add.overlap as any)(this.towerGroup, this.enemyGroup, (tower: Tower, enemy: Enemy) => {\n      if (!tower.getTarget()) {\n        tower.setTarget(enemy);\n      }\n    });\n    this.events.on('enemyDestroyed', (enemy: Enemy) => {\n      (this.particles as any).setDepth(enemy.y + 64);\n      this.particles.emitParticleAt(enemy.x, enemy.y, 6);\n      enemy.onDestroy(this.enemyGroup);\n    });\n    this.events.on('projectilesCreated', (projectiles: Projectile[]) => {\n      this.projectileGroup.addMultiple(projectiles);\n    });\n    this.events.on('projectileExploded', (projectile: Projectile) => {\n      projectile.onDestroy(this.projectileGroup);\n    });\n\n    const title = this.add.text(this.sys.canvas.width / 2, 128, 'TOWER DEFENSE');\n    title.setFontSize(96);\n    title.setFontStyle('bold');\n    title.setOrigin(0.5);\n    title.setStroke('#000000', 3);\n\n    const instruction = this.add.text(this.sys.canvas.width / 2, 256, 'Click to start!');\n    instruction.setFontSize(48);\n    instruction.setFontStyle('bold');\n    instruction.setOrigin(0.5);\n    instruction.setStroke('#000000', 1);\n\n    this.tweens.add({\n      targets: instruction,\n      props: {\n        alpha: 0.4,\n      },\n      ease: 'Linear',\n      duration: 800,\n      yoyo: true,\n      repeat: -1,\n    });\n\n    this.input.once('pointerup', () => {\n      this.cameras.main.fadeOut(1000, 255, 255, 255, (camera: Phaser.Cameras.Scene2D.Camera, progress: number) => {\n        if (progress < 1) {\n          return;\n        }\n        this.cleanup();\n        this.scene.stop('StartScene');\n        this.scene.start('PlayScene', {\n          score: 0,\n          coins: 1500,\n          level: 0,\n        });\n      }, this);\n    });\n  }\n\n  update(t: number, dt: number): void {\n    this.enemySpawner.update(dt);\n    this.towerGroup.getChildren().forEach((tower: Tower) => tower.tick(t, dt));\n    this.projectileGroup.getChildren().forEach((projectile: Projectile) => projectile.tick(t, dt));\n  }\n\n  cleanup() {\n    this.tweens.killAll();\n    this.sound.stopAll();\n    this.input.removeAllListeners();\n    if (this.subscription) {\n      this.subscription.unsubscribe();\n      this.subscription = null;\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/tower-defense/tower-defense-game/start.scene.ts","module.exports = \"<game-phaser-game-container\\n  [config]=\\\"config\\\"\\n  [title]=\\\"config.title\\\"\\n  [instructions]=\\\"instructions\\\"\\n></game-phaser-game-container>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/tower-defense/tower-defense-game/tower-defense-game.component.html\n// module id = ./src/app/tower-defense/tower-defense-game/tower-defense-game.component.html\n// module chunks = tower-defense.module","module.exports = \"\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/tower-defense/tower-defense-game/tower-defense-game.component.scss\n// module id = ./src/app/tower-defense/tower-defense-game/tower-defense-game.component.scss\n// module chunks = tower-defense.module","import { Component } from '@angular/core';\n\nimport { StartScene } from './start.scene';\nimport { PlayScene } from './play.scene';\n\n@Component({\n  templateUrl: './tower-defense-game.component.html',\n  styleUrls: ['./tower-defense-game.component.scss'],\n})\nexport class TowerDefenseGameComponent {\n  config: any = {\n    title: 'Tower Defense',\n    url: 'https://ksmai.github.io/html5-games/tower-defense',\n    version: '1.0',\n    pixelArt: false,\n    antialias: true,\n    width: 1024,\n    height: 640,\n    zoom: 1,\n    backgroundColor: '#ffffff',\n    scene: [\n      StartScene,\n      PlayScene,\n    ],\n    physics: {\n      default: 'arcade',\n      arcade: {\n        gravity: { x: 0, y: 0 },\n        debug: process.env.NODE_ENV !== 'production',\n      },\n    },\n  };\n  instructions: string = `Kill all the enemies before they touch the star!`;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/tower-defense/tower-defense-game/tower-defense-game.component.ts","import * as Phaser from 'phaser';\n\nimport {\n  Tower,\n  SingleCannon,\n  DoubleCannon,\n  SingleRocket,\n  DoubleRocket,\n} from './tower';\n\nexport class TowerShop {\n  private selectedTower: typeof Tower;\n  private towers: Array<typeof Tower> = [SingleCannon, DoubleCannon, SingleRocket, DoubleRocket];\n  private margin: number = 24;\n  private width: number = 48;\n  private height: number = 48;\n  private y: number = 8;\n  private groups: Phaser.GameObjects.Group[] = [];\n  private xStart: number;\n\n  constructor(private scene: Phaser.Scene) {\n  }\n\n  create(): void {\n    this.xStart = (this.scene.sys.canvas.width - this.width * this.towers.length - this.margin * (this.towers.length - 1)) / 2;\n    this.towers.forEach((tower: typeof Tower, i: number) => {\n      const group = this.renderButton(this.xStart + (this.width + this.margin) * i, this.y, tower);\n      this.groups.push(group);\n    });\n  }\n\n  handlePointerMove(pointer: Phaser.Input.Pointer): boolean {\n    for (let i = 0; i < this.towers.length; i++) {\n      const tower = this.towers[i];\n      const x = this.xStart + (this.width + this.margin) * i;\n      if (pointer.x > x && pointer.x < x + this.width && pointer.y > this.y && pointer.y < this.y + this.height) {\n        this.groups[i].getChildren().forEach((child: Phaser.GameObjects.Graphics | Phaser.GameObjects.Sprite) => {\n          child.setAlpha(0.8);\n        });\n        return true;\n      } else if (this.selectedTower !== tower) {\n        this.groups[i].getChildren().forEach((child: Phaser.GameObjects.Graphics | Phaser.GameObjects.Sprite) => {\n          child.setAlpha(0.5);\n        });\n      }\n    }\n    return true;\n  }\n\n  handlePointerDown(pointer: Phaser.Input.Pointer): boolean {\n    for (let i = 0; i < this.towers.length; i++) {\n      const tower = this.towers[i];\n      const x = this.xStart + (this.width + this.margin) * i;\n      if (pointer.x > x && pointer.x < x + this.width && pointer.y > this.y && pointer.y < this.y + this.height) {\n        if (this.selectedTower === tower) {\n          this.selectedTower = null;\n        } else {\n          this.selectedTower = tower;\n        }\n        return false;\n      }\n    }\n    return true;\n  }\n\n  getSelectedTower(): typeof Tower {\n    return this.selectedTower;\n  }\n\n  private renderButton(\n    x: number,\n    y: number,\n    ctor: typeof Tower,\n  ): Phaser.GameObjects.Group {\n    const graphics = this.scene.add.graphics();\n    graphics.fillStyle(0xffffff);\n    graphics.lineStyle(5, 0xffffff);\n    graphics.fillRect(x, y, this.width, this.height);\n    graphics.strokeRect(x, y, this.width, this.height);\n    graphics.setDepth(y + this.height);\n    graphics.setAlpha(0.5);\n\n    const sprite = this.scene.add.sprite(x + this.width / 2, y + 16, 'spritesheet', ctor.frameNumber);\n    sprite.setDepth(y + this.height);\n    sprite.setAlpha(0.5);\n    sprite.setScale(0.5);\n\n    const group = this.scene.add.group(null, null);\n    group.addMultiple([graphics, sprite]);\n\n    ctor.cost.toString().split('').forEach((digit, i) => {\n      const sprite = this.scene.add.sprite(x + 8 + i * 10, y + this.height - 8, 'spritesheet', 276 + +digit);\n      sprite.setDepth(y + this.height);\n      sprite.setAlpha(0.5);\n      sprite.setScale(0.4);\n      sprite.setTint(0xd0d400);\n      group.add(sprite);\n    });\n\n    return group;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/tower-defense/tower-defense-game/tower-shop.ts","import * as Phaser from 'phaser';\n\nimport { Projectile, SmallCannon } from '../projectile';\nimport { Tower } from './tower';\n\nexport class DoubleCannon extends Tower {\n  static radius: number = 128;\n  static cost: number = 2000;\n  static frameNumber: number = 250;\n  protected halfSize: number;\n\n  protected setup(): void {\n    this.idleFrameNumber = this.frameNumber;\n    this.maxCooldown = 300;\n    this.currentCooldown = 0;\n    this.halfSize = 32;\n    this.projectileConstructor = SmallCannon;\n    super.setup();\n  }\n\n  protected createProjectiles(angle: number): Projectile[] {\n    return [new this.projectileConstructor(\n      this.scene,\n      this.x - 10 + this.halfSize * Math.sin(angle),\n      this.y - this.halfSize * Math.cos(angle),\n      this.target,\n    ), new this.projectileConstructor(\n      this.scene,\n      this.x + 10 + this.halfSize * Math.sin(angle),\n      this.y - this.halfSize * Math.cos(angle),\n      this.target,\n    )];\n  }\n\n  protected get frameNumber() {\n    return DoubleCannon.frameNumber;\n  }\n\n  protected get radius() {\n    return DoubleCannon.radius;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/tower-defense/tower-defense-game/tower/double-cannon.ts","import * as Phaser from 'phaser';\n\nimport { SmallRocket, Projectile } from '../projectile';\nimport { Tower } from './tower';\n\nexport class DoubleRocket extends Tower {\n  static radius: number = 300;\n  static cost: number = 8000;\n  static frameNumber: number = 205;\n  protected halfSize: number;\n\n  protected setup(): void {\n    this.idleFrameNumber = 228;\n    this.maxCooldown = 2500;\n    this.halfSize = 4;\n    this.projectileConstructor = SmallRocket;\n    super.setup();\n  }\n\n  protected createProjectiles(angle: number): Projectile[] {\n    return [new this.projectileConstructor(\n      this.scene,\n      this.x - 8.5 + this.halfSize * Math.sin(angle),\n      this.y - this.halfSize * Math.cos(angle),\n      this.target,\n    ), new this.projectileConstructor(\n      this.scene,\n      this.x + 8.5 + this.halfSize * Math.sin(angle),\n      this.y - this.halfSize * Math.cos(angle),\n      this.target,\n    )];\n  }\n\n  protected get frameNumber() {\n    return DoubleRocket.frameNumber;\n  }\n\n  protected get radius() {\n    return DoubleRocket.radius;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/tower-defense/tower-defense-game/tower/double-rocket.ts","export { Tower } from './tower';\nexport { SingleCannon } from './single-cannon';\nexport { DoubleCannon } from './double-cannon';\nexport { SingleRocket } from './single-rocket';\nexport { DoubleRocket } from './double-rocket';\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/tower-defense/tower-defense-game/tower/index.ts","import * as Phaser from 'phaser';\n\nimport { BigCannon, Projectile } from '../projectile';\nimport { Tower } from './tower';\n\nexport class SingleCannon extends Tower {\n  static radius: number = 128;\n  static cost: number = 1000;\n  static frameNumber: number = 249;\n  protected halfSize: number;\n\n  protected setup(): void {\n    this.idleFrameNumber = this.frameNumber;\n    this.maxCooldown = 250;\n    this.halfSize = 32;\n    this.projectileConstructor = BigCannon;\n    super.setup();\n  }\n\n  protected createProjectiles(angle: number): Projectile[] {\n    return [new this.projectileConstructor(\n      this.scene,\n      this.x + this.halfSize * Math.sin(angle),\n      this.y - this.halfSize * Math.cos(angle),\n      this.target,\n    )];\n  }\n\n  protected get frameNumber() {\n    return SingleCannon.frameNumber;\n  }\n\n  protected get radius() {\n    return SingleCannon.radius;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/tower-defense/tower-defense-game/tower/single-cannon.ts","import * as Phaser from 'phaser';\n\nimport { BigRocket, Projectile } from '../projectile';\nimport { Tower } from './tower';\n\nexport class SingleRocket extends Tower {\n  static radius: number = 300;\n  static cost: number = 4000;\n  static frameNumber: number = 206;\n  protected halfSize: number;\n\n  protected setup(): void {\n    this.idleFrameNumber = 229;\n    this.maxCooldown = 2500;\n    this.halfSize = 7;\n    this.projectileConstructor = BigRocket;\n    super.setup();\n  }\n\n  protected createProjectiles(angle: number): Projectile[] {\n    return [new this.projectileConstructor(\n      this.scene,\n      this.x + this.halfSize * Math.sin(angle),\n      this.y - this.halfSize * Math.cos(angle),\n      this.target,\n    )];\n  }\n\n  protected get frameNumber() {\n    return SingleRocket.frameNumber;\n  }\n\n  protected get radius() {\n    return SingleRocket.radius;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/tower-defense/tower-defense-game/tower/single-rocket.ts","import * as Phaser from 'phaser';\n\nimport { Enemy } from '../enemy';\nimport { Projectile } from '../projectile';\n\nexport class Tower extends Phaser.Physics.Arcade.Sprite {\n  static cost: number;\n  static frameNumber: number;\n  static radius: number;\n  protected maxCooldown: number;\n  protected currentCooldown: number = 0;\n  protected target: Enemy = null;\n  protected idleFrameNumber: number;\n  protected projectileConstructor: typeof Projectile;\n\n  constructor(scene: Phaser.Scene, x: number, y: number) {\n    super(scene, x, y, 'spritesheet');\n    scene.add.existing(this);\n    scene.physics.add.existing(this);\n    this.setDepth(y);\n    this.setup();\n  }\n\n  protected setup(): void {\n    this.setFrame(this.frameNumber);\n    this.setCircle(this.radius, -this.radius + 32, -this.radius + 32);\n  }\n\n  tick(t: number, dt: number): void {\n    this.currentCooldown = Math.max(0, this.currentCooldown - dt);\n    if (this.currentCooldown <= 500) {\n      this.setFrame(this.frameNumber);\n    } else {\n      this.setFrame(this.idleFrameNumber);\n    }\n    if (this.target) {\n      const angle = this.calculateRotation(this.x, this.y, this.target.x, this.target.y);\n      this.setRotation(angle);\n      if (this.currentCooldown <= 0) {\n        const projectiles = this.createProjectiles(angle);\n        this.scene.events.emit('projectilesCreated', projectiles);\n        this.currentCooldown = this.maxCooldown;\n      }\n      this.target = null;\n    }\n  }\n\n  getTarget(): Enemy | null {\n    return this.target;\n  }\n\n  setTarget(target: Enemy): void {\n    this.target = target;\n  }\n\n  protected createProjectiles(angle: number): Projectile[] {\n    return [new this.projectileConstructor(\n      this.scene,\n      this.x,\n      this.y,\n      this.target,\n    )];\n  }\n\n  protected get frameNumber() {\n    return Tower.frameNumber;\n  }\n\n  protected get radius() {\n    return Tower.radius;\n  }\n\n  private calculateRotation(x: number, y: number, x2: number, y2: number): number {\n    if (y2 === y) {\n      return x2 > x ? Math.PI / 2 : -Math.PI / 2;\n    }\n    if (y2 > y) {\n      return Math.PI - Math.atan((x2 - x) / (y2 - y));\n    }\n    return -Math.atan((x2 - x) / (y2 - y));\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/tower-defense/tower-defense-game/tower/tower.ts","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { TowerDefenseGameComponent } from './tower-defense-game/tower-defense-game.component';\n\nconst routes: Routes = [\n  { path: '', component: TowerDefenseGameComponent },\n];\n\n@NgModule({\n  imports: [\n    RouterModule.forChild(routes),\n  ],\n  exports: [\n    RouterModule,\n  ],\n})\nexport class TowerDefenseRoutingModule {\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/tower-defense/tower-defense-routing.module.ts","import { NgModule } from '@angular/core'\nimport { CommonModule } from '@angular/common';\n\nimport { TowerDefenseGameComponent } from './tower-defense-game/tower-defense-game.component';\nimport { TowerDefenseRoutingModule } from './tower-defense-routing.module';\nimport { PhaserGameModule } from '../phaser-game/phaser-game.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n\n    PhaserGameModule,\n    TowerDefenseRoutingModule,\n  ],\n  declarations: [\n    TowerDefenseGameComponent,\n  ],\n})\nexport class TowerDefenseModule {\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/tower-defense/tower-defense.module.ts","type VertexMap = {\n  [key: number]: any;\n};\n\ntype Edges = {\n  [key: number]: VertexMap;\n};\n\nimport { inPlaceFisherYatesShuffle } from './shuffle';\n\n/**\n * Simple undirected graph with no self loop\n */\nexport class Graph<T extends number> {\n  private vertices: VertexMap = {};\n  private edges: Edges = {};\n\n  /**\n   * Add a new vertex\n   */\n  addVertex(vertex: T): void {\n    if (this.vertices.hasOwnProperty(vertex.toString())) {\n      throw new Error(`Vertex already exists: ${vertex}`);\n    }\n    this.vertices[vertex.toString()] = true;\n    this.edges[vertex.toString()] = {};\n  }\n\n  /**\n   * Add a new edge between two existing vertices\n   */\n  addEdge(vertex1: T, vertex2: T) {\n    if (vertex1 === vertex2) {\n      throw new Error(`Self loop is not allowed: ${vertex1}`);\n    }\n    if (!this.vertices.hasOwnProperty(vertex1.toString())) {\n      throw new Error(`Unknown vertex: ${vertex1}`);\n    }\n    if (!this.vertices.hasOwnProperty(vertex2.toString())) {\n      throw new Error(`Unknown vertex: ${vertex2}`);\n    }\n    if (this.edges[vertex1.toString()].hasOwnProperty(vertex2.toString())) {\n      throw new Error(`Edge already exists: ${vertex1} - ${vertex2}`);\n    }\n    if (this.edges[vertex2.toString()].hasOwnProperty(vertex1.toString())) {\n      throw new Error(`Edge already exists: ${vertex2} - ${vertex1}`);\n    }\n    this.edges[vertex1.toString()][vertex2.toString()] = true;\n    this.edges[vertex2.toString()][vertex1.toString()] = true;\n  }\n\n  getVertices(): VertexMap {\n    return this.vertices;\n  }\n\n  getEdges(): Edges {\n    return this.edges;\n  }\n\n  /**\n   * Get a spanning tree from the graph\n   * The algorithm starts from a random vertex and\n   * add the vertex to both the visited set and the active set\n   * at each iteration, choose either a random node between or \n   * the oldest node in the active set, and visit a random unvisited\n   * neighbour of that node\n   * if the chosen node has no unvisited neighbour, it will get removed\n   * from the active set\n   * The process repeats until there are no more nodes in the active set\n   */\n  growTree() {\n    const tree = new Graph();\n    const activeNodes: T[] = [];\n    const activeNodeSet: VertexMap = {};\n    const visitedNodeSet: VertexMap = {};\n    const numNodes = Object.keys(this.vertices).length;\n    const randomIndex = Math.floor(Math.random() * numNodes);\n    const startingNode = Object.keys(this.vertices)[randomIndex];\n    activeNodes.push(+startingNode as T);\n    activeNodeSet[+startingNode] = true;\n    visitedNodeSet[+startingNode] = true;\n    tree.addVertex(+startingNode);\n    while (activeNodes.length) {\n      let hasUnvisitedNeighbor = false;\n      const nodeIdx = Math.random() < 0.5 ? 0 : Math.floor(Math.random() * activeNodes.length);\n      const node = activeNodes[nodeIdx];\n      const neighbours = inPlaceFisherYatesShuffle(Object.keys(this.edges[node.toString()]));\n      for (let neighbour of neighbours) {\n        if (!visitedNodeSet.hasOwnProperty(neighbour.toString())) {\n          hasUnvisitedNeighbor = true;\n          activeNodes.push(+neighbour as T);\n          activeNodeSet[+neighbour] = true;\n          visitedNodeSet[+neighbour] = true;\n          tree.addVertex(+neighbour);\n          tree.addEdge(+node, +neighbour);\n          break;\n        }\n      }\n      if (!hasUnvisitedNeighbor) {\n        activeNodes.splice(nodeIdx, 1);\n        delete activeNodeSet[+node];\n      }\n    }\n\n    return tree;\n  }\n\n  /**\n   * Search a path between two vertices by DFS\n   */\n  search(start: T, end: T): T[] {\n    const path = [start];\n    const visited: VertexMap = {\n      [start.toString()]: true,\n    };\n\n    while (path.length) {\n      const nodes = Object.keys(this.edges[path[path.length - 1].toString()]);\n      let hasMove = false;\n      for (let node of nodes) {\n        if (!visited[node.toString()]) {\n          path.push(+node as T);\n          visited[node.toString()] = true;\n          hasMove = true;\n          break;\n        }\n      }\n      if (!hasMove) {\n        path.pop();\n      } else if (path[path.length - 1] === end) {\n        break;\n      }\n    }\n\n    return path;\n  }\n\n  debug(width: number, height: number) {\n    const vertices = Object.keys(this.vertices).map(Number).sort();\n    const rows = [];\n    for (let y = 0; y < height; y++) {\n      let row = '';\n      let nextRow = '';\n      for (let x = 0; x < width; x++) {\n        const n = y * width + x;\n        row += 0;\n        if (x < width - 1 && this.edges[n.toString()].hasOwnProperty((n + 1).toString())) {\n          row += '-';\n        } else {\n          row += ' ';\n        }\n        if (y < height - 1) {\n          if (this.edges[n.toString()].hasOwnProperty((n + width).toString())) {\n            nextRow += '| ';\n          } else {\n            nextRow += '  ';\n          }\n        }\n      }\n      rows.push(row, nextRow);\n    }\n    console.log(rows.join('\\n'));\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/graph.ts"],"sourceRoot":"webpack:///"}